pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                // Checkout the code from GitHub
                git branch: 'main', url: 'https://github.com/your-username/automation-pipeline.git'
            }
        }
        stage('Update Greeting') {
            steps {
                script {
                    // Update the greeting in greeting.py using shell command
                    sh 'sed -i "s/hi raghavi/hi raghavi mekala/" greeting.py'
                }
            }
        }
        stage('Commit and Push') {
            steps {
                script {
                    // Configure git to commit the changes
                    sh 'git config --global user.email "jenkins@yourdomain.com"'
                    sh 'git config --global user.name "Jenkins"'
                    // Add, commit, and push the changes back to GitHub
                    sh 'git add greeting.py'
                    sh 'git commit -m "Automated update: hi raghavi to hi raghavi mekala"'
                    sh 'git push origin main'
                }
            }
        }
        stage('Deploy to Server') {
            steps {
                // Optional: Add a deployment step here if you want to run the script on a server
                script {
                    // Replace with your server's SSH login and path to deploy
                    sh 'ssh user@your-server-ip "cd /path/to/repo && git pull && python3 greeting.py"'
                }
            }
        }
    }
}
